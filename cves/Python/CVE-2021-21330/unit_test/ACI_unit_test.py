import aiohttp
from aiohttp import web
import logging

# Setup basic logging
logging.basicConfig(level=logging.INFO)

async def exploit(request):
    url = request.query.get('url', '/')
    raise web.HTTPFound(url)

app = web.Application()
app.router.add_get('/', exploit)

if __name__ == '__main__':
    try:
        logging.info("Starting the server...")
        web.run_app(app, port=8080, shutdown_timeout=10)  # Timeout after 10 seconds
    except Exception as e:
        logging.error(f"An error occurred: {e}")
    finally:
        logging.info("Server has been shut down.")
