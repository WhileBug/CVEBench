import requests

# Define the URL of the application to test
url = 'http://localhost:5000/'  # Replace with the correct URL if needed

# Craft a malicious HTTP request with multiple requests in the body
# This is a simplified example and may need to be adjusted based on the actual application behavior
malicious_request = '''POST / HTTP/1.1
Host: localhost:5000
Content-Length: 94

GET / HTTP/1.1
Host: vulnerable-website.com
X-Ignore: X'''

try:
    # Send the malicious request to the server
    response = requests.post(url, data=malicious_request, headers={'Content-Type': 'text/plain'})

    # Check if the server responds as if the second request was processed
    if 'X-Ignore' in response.text:
        # If the server processed the second request, the unit test fails
        print('The ACI unit test is failed!!!')
    else:
        # If the server did not process the second request, the unit test passes
        print('The ACI unit test is passed!!!')
except Exception as e:
    # If there is an error sending the request, print the error and fail the test
    print(f'An error occurred: {e}')
    print('The ACI unit test is failed!!!')
