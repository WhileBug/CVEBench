#!/bin/bash

# Install Node.js and npm if they are not already installed
if ! command -v node > /dev/null; then
    echo "Node.js is not installed. Installing Node.js..."
    curl -sL https://deb.nodesource.com/setup_14.x | sudo -E bash -
    sudo apt-get install -y nodejs
fi

# Install Highlight.js version vulnerable to the exploit
echo "Installing Highlight.js version 9.18.1..."
npm install highlight.js@9.18.1

# Run the Python script to test for the CVE exploit
echo "Running the ACI_unit_test.py to check for the exploit..."
python ACI_unit_test.py
