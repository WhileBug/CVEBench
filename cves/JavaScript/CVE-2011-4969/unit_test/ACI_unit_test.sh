#!/bin/bash

# Ensure Python 3 is installed
if ! command -v python3 &> /dev/null
then
    echo "Python 3 could not be found, please install Python 3."
    exit 1
fi

# Check if required Python packages are installed
required_pkg="subprocess http.server socketserver threading"
pkg_installed=true

for pkg in $required_pkg; do
    python3 -c "import $pkg" 2>/dev/null
    if [ $? -ne 0 ]; then
        echo "Package $pkg is not installed."
        pkg_installed=false
    fi
done

if [ "$pkg_installed" = false ]; then
    echo "Please install the missing Python packages."
    exit 1
fi

# Run the Python script to test the exploit
python3 ACI_unit_test.py
