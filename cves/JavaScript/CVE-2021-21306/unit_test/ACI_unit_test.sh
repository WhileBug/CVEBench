#!/bin/bash

# Install Node.js and npm if not already installed
if ! command -v node &> /dev/null
then
    echo "Node.js could not be found, installing..."
    curl -sL https://deb.nodesource.com/setup_14.x | sudo -E bash -
    sudo apt-get install -y nodejs
fi

# Install npx if not already installed
if ! command -v npx &> /dev/null
then
    echo "npx could not be found, installing..."
    npm install -g npx
fi

# Install marked package
echo "Installing marked package..."
npm install marked@2.0.0

# Run the Python script to test for the CVE
echo "Running the ACI unit test..."
python ACI_unit_test.py
