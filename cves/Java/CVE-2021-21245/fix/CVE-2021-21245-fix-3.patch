
diff --git a/server-core/src/main/java/io/onedev/server/web/component/markdown/InsertUrlPanel.java b/server-core/src/main/java/io/onedev/server/web/component/markdown/InsertUrlPanel.java
index 9a972075e..58bbf4981 100644
--- a/server-core/src/main/java/io/onedev/server/web/component/markdown/InsertUrlPanel.java
+++ b/server-core/src/main/java/io/onedev/server/web/component/markdown/InsertUrlPanel.java
@@ -402,7 +402,8 @@ abstract class InsertUrlPanel extends Panel {
 					String attachmentName;
 					FileUpload upload = uploads.iterator().next();
 					try (InputStream is = upload.getInputStream()) {
-						attachmentName = attachmentSupport.saveAttachment(upload.getClientFileName(), is);
+                        String sanitizedFilename = FilenameUtils.getName(upload.getClientFileName());
+                        attachmentName = attachmentSupport.saveAttachment(sanitizedFilename, is);
 					} catch (IOException e) {
 						throw new RuntimeException(e);
 					}
